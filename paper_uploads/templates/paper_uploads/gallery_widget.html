<div class="gallery dropzone {% if not widget.value %}empty{% endif %}"
     data-delete-gallery-url="{{ delete_gallery_url }}"
     data-upload-item-url="{{ upload_item_url }}"
     data-change-item-url="{{ change_item_url }}"
     data-delete-item-url="{{ delete_item_url }}"
     data-sort-items-url="{{ sort_items_url }}"
     data-paper-owner-app-label="{{ owner_app_label }}"
     data-paper-owner-model-name="{{ owner_model_name }}"
     data-paper-owner-fieldname="{{ owner_fieldname }}"
     data-paper-gallery-content-type="{{ content_type.pk }}"
     data-validation='{{ validation|safe }}'>

  <input type="hidden" class="gallery__input"
         name="{{ widget.name }}"
         value="{{ widget.value|default:'' }}"
         {% include "django/forms/widgets/attrs.html" %}/>

  <div class="gallery__items">
    {% if widget.value %}
      {% for item in instance.get_items %}
        {% include item.TEMPLATE_NAME %}
      {% endfor %}
    {% endif %}
  </div>

  <button type="button" class="gallery__upload-button btn btn-success">
    <i class="fa fa-fw fa-folder-open"></i>
    {{ _('Select files') }}
  </button>

  {% if not widget.required %}
    <button type="button" class="gallery__delete-button btn btn-danger" {% if not widget.value %}disabled{% endif %}>
      <i class="fa fa-fw fa-trash"></i>
      {{ _('Delete gallery') }}
    </button>
  {% endif %}

  <div class="gallery__help-text">
    <small class="text-muted">
      <kbd class="gallery__kbd">Ctrl+Click</kbd> to select multiple items.
      <kbd class="gallery__kbd">Double-click</kbd> to open item
    </small>
  </div>

  <div class="dropzone-overlay">
    <div class="dropzone-hint">
      <i class="fa fa-fw fa-upload"></i>
      {{ _('Drop files here to send') }}
    </div>
  </div>

  <template class="gallery__item-preloader">
    {% include 'paper_uploads/gallery_item/preloader.html' %}
  </template>

  {% for name, field in gallery_cls.item_types.items %}
    <template class="gallery__{{ name }}-item-template">
      {% include field.model.TEMPLATE_NAME %}
    </template>
  {% endfor %}
</div>
